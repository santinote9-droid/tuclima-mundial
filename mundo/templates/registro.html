<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Cuenta | Weather Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ESTILO GENERAL DARK MODE */
        body {
            background-color: #0f172a;
            color: #fff;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-image: radial-gradient(circle at 50% 0%, #1e293b 0%, #0f172a 80%);
        }

        .container { width: 100%; max-width: 450px; padding: 20px; }

        /* TARJETA */
        .card {
            background: #1e293b;
            padding: 40px;
            border-radius: 20px;
            border: 1px solid #334155;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* LOGO */
        .brand { text-align: center; font-size: 1.8rem; font-weight: 800; margin-bottom: 30px; letter-spacing: -1px; }
        .brand span { color: #3b82f6; }

        h2 { text-align: center; margin-bottom: 20px; font-size: 1.2rem; color: #94a3b8; font-weight: normal; }

        /* ESTILOS DEL FORMULARIO DE DJANGO */
        form { display: flex; flex-direction: column; gap: 15px; }

        /* Etiquetas (Labels) */
        label { color: #cbd5e1; font-size: 0.9em; margin-bottom: 5px; display: block; font-weight: 600; }

        /* Inputs (Cajas de texto) */
        input[type="text"], input[type="password"], input[type="email"] {
            width: 100%;
            padding: 12px 15px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            box-sizing: border-box; /* Importante para que no se salga */
            transition: 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }

        /* Textos de ayuda (Las letras chicas de Django) */
        .helptext { display: block; font-size: 0.75em; color: #64748b; margin-top: 4px; }
        ul { padding-left: 20px; color: #64748b; font-size: 0.8em; margin: 5px 0; }

        /* BOTÓN */
        button {
            margin-top: 20px;
            width: 100%;
            padding: 15px;
            background: linear-gradient(90deg, #3b82f6, #2563eb);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
        }

        button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(37, 99, 235, 0.6); }

        /* ENLACE INFERIOR */
        .bottom-link { text-align: center; margin-top: 25px; font-size: 0.9em; color: #94a3b8; }
        .bottom-link a { color: #3b82f6; text-decoration: none; font-weight: bold; }
        .bottom-link a:hover { text-decoration: underline; }
        
        /* Ocultar viñetas feas de errores/ayuda */
        ul.errorlist { color: #ef4444; list-style: none; padding: 0; }
    </style>

<script type="text/javascript" src="https://cdn.weglot.com/weglot.min.js"></script>
    <script>
        Weglot.initialize({
            api_key: 'wg_169c193b22e7a117be85a2f56113ab415', // <--- TU LLAVE REAL
            hide_switcher: true,         // Oculta el botón estándar (usaremos el nuestro)
            auto_switch: true            // Detecta idioma automático
        });
    </script>

</head>
<body>

<div id="google_translate_element" style="display:none;"></div>

<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'es', 
            includedLanguages: 'en,fr,it,pt,de', // Idiomas permitidos
            autoDisplay: false
        }, 'google_translate_element');
    }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script type="text/javascript">
    window.addEventListener('load', function() {
        // A. Detectamos el idioma del navegador del usuario (ej: 'en-US' o 'pt-BR')
        var idiomaUsuario = navigator.language || navigator.userLanguage; 
        idiomaUsuario = idiomaUsuario.split('-')[0]; // Nos quedamos solo con las dos letras ('en', 'pt', etc.)

        // B. Si el usuario NO habla español, activamos la traducción
        if (idiomaUsuario !== 'es') {
            
            // Esperamos un segundo a que Google cargue en el fondo
            setTimeout(function() {
                var select = document.querySelector('select.goog-te-combo');
                if (select) {
                    select.value = idiomaUsuario; // Seleccionamos su idioma
                    select.dispatchEvent(new Event('change')); // ¡Clic virtual!
                }
            }, 1000); // 1000ms = 1 segundo de espera
        }
    });
</script>

<style>
    .goog-te-banner-frame { display: none !important; }
    body { top: 0px !important; }
    #google_translate_element { display: none !important; }
</style>

    <div class="container">
        <div class="card">
            <div class="brand"><i class="fas fa-cloud"></i> Tu<span class="notranslate">Clima</span></div>
            <h2>Crea tu cuenta para empezar</h2>
            
            <form method="post">
                {% csrf_token %}
                
                {% for field in form %}
                    <div>
                        <label>{{ field.label }}</label>
                        {{ field }}
                        {% if field.help_text %}
                            <small class="helptext">{{ field.help_text|safe }}</small>
                        {% endif %}
                        {% for error in field.errors %}
                            <div style="color:#ef4444; font-size:0.8em; margin-top:5px;">
                                <i class="fas fa-exclamation-circle"></i> {{ error }}
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}

                <button type="submit">Registrarse Gratis</button>
            </form>

            <div class="bottom-link">
                ¿Ya tienes cuenta? <a href="/login/">Inicia Sesión</a>
            </div>
        </div>
    </div>

</body>
</html>