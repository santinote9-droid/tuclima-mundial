{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<link rel="icon" type="image/jpeg" href="{% static 'img/logo.jpg' %}">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-wg-notranslate>Tu Clima Mundial</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="user-info" style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1000; font-family: 'Segoe UI', sans-serif;">
    {% if user.is_authenticated %}
        <div style="display: flex; align-items: center; gap: 12px; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 25px; border: 1px solid rgba(56, 189, 248, 0.4); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);">
            <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #38bdf8, #0ea5e9); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; font-size: 0.9em; box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);">
                {{ user.username|first|upper }}
            </div>
            
            <div style="display: flex; flex-direction: column; line-height: 1.2;">
                <span style="color: #f8fafc; font-weight: 600; font-size: 0.9em; letter-spacing: 0.5px;">Hola, {{ user.username }}</span>
                <span style="color: #38bdf8; font-size: 0.7em; font-weight: 700; text-transform: uppercase;">PRO User</span>
            </div>

            <div style="width: 1px; height: 20px; background: rgba(56, 189, 248, 0.3); margin: 0 4px;"></div>

            <a href="/logout/" style="color: #ef4444; text-decoration: none; font-weight: 700; font-size: 0.8em; padding: 5px 12px; border-radius: 15px; transition: all 0.3s; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);" 
               onmouseover="this.style.background='rgba(239, 68, 68, 0.2)'; this.style.transform='scale(1.05)';" 
               onmouseout="this.style.background='rgba(239, 68, 68, 0.1)'; this.style.transform='scale(1)';">
               Salir
            </a>
        </div>
    {% else %}
        <a href="/login/" style="background: rgba(56, 189, 248, 0.1); color: #38bdf8; text-decoration: none; font-weight: 600; padding: 10px 24px; border-radius: 20px; border: 1.5px solid #38bdf8; backdrop-filter: blur(5px); transition: all 0.3s;"
           onmouseover="this.style.background='#38bdf8'; this.style.color='white';">
           Ingresar al Sistema
        </a>
    {% endif %}
</div>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-image: url('{% static fondo %}');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-color: #1a2a3a;
            color: white;
            margin: 0;
            padding: 0;
            box-shadow: inset 0 0 0 2000px rgba(0, 0, 0, 0.4);
            min-height: 100vh;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 10px 0 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Buscador */
        .buscador { margin-bottom: 30px; }

        /* Tarjeta Principal */
        .card { 
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: inline-block; 
            padding: 35px; 
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            min-width: 420px; 
            max-width: 500px;
            width: 100%;
            position: relative;
        }
        
        .icono-principal { width: 120px; height: 120px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); margin: 10px 0; }
        h1 { margin: 0; color: #ffcc00; font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); }
        h3 { color: #eee; font-weight: normal; margin-top: 5px; }
        .dato-grande { font-size: 4em; font-weight: bold; margin: 10px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .etiqueta { color: #ccc; text-transform: uppercase; font-size: 0.8em; letter-spacing: 2px; }
        .coord { font-size: 0.8em; color: #aaa; margin-top: 20px; }

        /* Carrusel Horario */
        .carrusel-horas { 
            display: flex; 
            overflow-x: auto; 
            gap: 20px; 
            padding: 25px 20px 25px 20px; 
            scrollbar-width: thin; 
            scrollbar-color: rgba(56, 189, 248, 0.6) rgba(15, 23, 42, 0.4);
            border-radius: 15px;
            background: rgba(15, 23, 42, 0.2);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        .carrusel-horas::-webkit-scrollbar { 
            height: 10px; 
        }
        
        .carrusel-horas::-webkit-scrollbar-track { 
            background: rgba(15, 23, 42, 0.4);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .carrusel-horas::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            border-radius: 20px;
            border: 2px solid rgba(15, 23, 42, 0.3);
            box-shadow: 0 2px 8px rgba(56, 189, 248, 0.3);
            transition: all 0.3s ease;
        }
        
        .carrusel-horas::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            box-shadow: 0 4px 12px rgba(56, 189, 248, 0.5);
            transform: scaleY(1.2);
        }
        
        .item-hora { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-width: 85px; 
            padding: 15px 12px; 
            border-radius: 18px; 
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .icono-hora { width: 48px; height: 48px; margin: 8px 0; }

        .hora-destacada { 
            background: rgba(0, 210, 255, 0.25); 
            border: 2px solid #00d2ff; 
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.5); 
            transform: scale(1.08);
        }

        .evento-solar { 
            background: rgba(255, 204, 0, 0.2); 
            border: 1px solid rgba(255, 204, 0, 0.7);
            min-width: 95px;
            box-shadow: 0 0 15px 3px rgba(255, 204, 0, 0.3);
            margin: 0 3px;
            padding: 15px 8px;
            box-sizing: border-box;
        }

        /* Calendario */
        .contenedor-dias { 
            display: flex; 
            overflow-x: auto; 
            justify-content: center; 
            gap: 25px; 
            padding: 25px 60px; 
            max-width: 1900px; 
            margin: 0 auto; 
            box-sizing: border-box;
            background: rgba(15, 23, 42, 0.15);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 20px;
            scrollbar-width: thin;
            scrollbar-color: rgba(56, 189, 248, 0.6) rgba(15, 23, 42, 0.4);
        }
        
        .contenedor-dias::-webkit-scrollbar {
            height: 10px;
        }
        
        .contenedor-dias::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.4);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .contenedor-dias::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            border-radius: 20px;
            border: 2px solid rgba(15, 23, 42, 0.3);
            box-shadow: 0 2px 8px rgba(56, 189, 248, 0.3);
        }
        
        .contenedor-dias::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            box-shadow: 0 4px 12px rgba(56, 189, 248, 0.5);
        }
        
        .tarjeta-dia { 
            background: rgba(0, 0, 0, 0.6); 
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.1); 
            padding: 40px 20px 25px 20px; 
            border-radius: 22px; 
            width: 140px; 
            height: 180px;
            cursor: pointer; 
            transition: all 0.3s ease; 
            box-sizing: border-box; 
            margin: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        .tarjeta-dia:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-8px); border-color: #ffcc00; box-shadow: 0 8px 25px rgba(255, 204, 0, 0.3); }
        .dia-activo { border: 2px solid #ffcc00; background: rgba(255, 204, 0, 0.15); box-shadow: 0 0 20px rgba(255, 204, 0, 0.4); transform: scale(1.08); }
        .icono-chico { width: 60px; height: 60px; margin: 10px 0; }
        .max { color: #ff6b6b; font-weight: bold; } .min { color: #4ecdc4; font-weight: bold; }
        
        /* Noticias */
        .contenedor-noticias { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .tarjeta-noticia { background: rgba(30, 30, 30, 0.9); border-radius: 15px; width: 300px; overflow: hidden; text-align: left; transition: transform 0.3s; }
        .tarjeta-noticia:hover { transform: translateY(-5px); }
        .foto-noticia { width: 100%; height: 160px; object-fit: cover; }
        .contenido-nota { padding: 15px; }
        .btn-leer { background: transparent; border: 1px solid #00d2ff; color: #00d2ff; padding: 5px 10px; border-radius: 20px; margin-top: 10px; cursor: pointer; font-size: 0.8em; text-decoration: none; display: inline-block; }
        
        /* Estilo para la barra de scroll del Men√∫ - Dise√±o Profesional Glassmorphism */
        #miSidebar::-webkit-scrollbar {
            width: 12px;
        }
        
        #miSidebar::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 20px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        #miSidebar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(56, 189, 248, 0.8), rgba(14, 165, 233, 0.9));
            border-radius: 20px;
            border: 2px solid rgba(15, 23, 42, 0.4);
            box-shadow: 0 3px 12px rgba(56, 189, 248, 0.4);
            transition: all 0.3s ease;
        }
        
        #miSidebar::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.9), rgba(2, 132, 199, 1));
            box-shadow: 0 5px 20px rgba(56, 189, 248, 0.6);
            transform: scaleY(1.1);
            border-color: rgba(56, 189, 248, 0.3);
        }
        
        /* Para Firefox - Sidebar */
        #miSidebar {
            scrollbar-width: thin;
            scrollbar-color: rgba(56, 189, 248, 0.8) rgba(15, 23, 42, 0.6);
        }

    </style>

<script type="text/javascript" src="https://cdn.weglot.com/weglot.min.js"></script>
    <script>
        Weglot.initialize({
            api_key: 'wg_169c193b22e7a117be85a2f56113ab415', // <--- TU LLAVE REAL
            hide_switcher: true,         // Oculta el bot√≥n est√°ndar (usaremos el nuestro)
            auto_switch: true            // Detecta idioma autom√°tico
        });
    </script>

<meta name="google" content="notranslate">
</head>

<body>
<div class="main-container">

{% if opciones_ciudades %}
<div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px);">
    
    <div style="background: #1e293b; border: 1px solid #334155; width: 90%; max-width: 500px; border-radius: 20px; box-shadow: 0 0 50px rgba(56, 189, 248, 0.2); overflow: hidden; animation: fadeIn 0.3s ease-out;">
        
        <div style="background: #0f172a; padding: 20px; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; color: #fff; display: flex; align-items: center; gap: 10px;">
                <svg style="width:20px; height:20px; color:#38bdf8;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                Resultados encontrados
            </h3>
            <button onclick="this.closest('div').parentElement.parentElement.style.display='none'" style="background: none; border: none; color: #64748b; font-size: 1.5em; cursor: pointer;">&times;</button>
        </div>

        <div style="max-height: 60vh; overflow-y: auto; padding: 10px;">
            <p style="color: #94a3b8; font-size: 0.9em; padding: 0 10px; margin-bottom: 15px;">
                Hemos encontrado varias ubicaciones para tu b√∫squeda. Por favor, selecciona la correcta:
            </p>

            {% for ciudad in opciones_ciudades %}
            <a href="/?lat={{ ciudad.latitude }}&lon={{ ciudad.longitude }}" style="text-decoration: none;">
                <div class="item-ciudad" style="display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 10px; transition: 0.2s; border-bottom: 1px solid rgba(255,255,255,0.05); margin-bottom: 5px;">
                    
                    {% if ciudad.country_code %}
                    <img src="https://flagcdn.com/w40/{{ ciudad.country_code|lower }}.png" style="width: 25px; border-radius: 4px; box-shadow: 0 0 5px rgba(0,0,0,0.5);">
                    {% else %}
                    <span style="font-size: 1.5em;">üåç</span>
                    {% endif %}

                    <div style="flex: 1;">
                        <div style="color: #fff; font-weight: 700; font-size: 1.1em;">{{ ciudad.name }}</div>
                        <div style="color: #94a3b8; font-size: 0.85em;">
                            {{ ciudad.admin1|default:"" }} {% if ciudad.admin1 %}|{% endif %} {{ ciudad.country }}
                        </div>
                    </div>
                    
                    <svg style="width:18px; height:18px; color: #38bdf8;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</div>

<style>
    .item-ciudad:hover {
        background: rgba(56, 189, 248, 0.1);
        transform: translateX(5px);
    }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
</style>
{% endif %}


<div id="google_translate_element" style="display:none;"></div>

<script type="text/javascript">
    function googleTranslateElementInit() {
        try {
            new google.translate.TranslateElement({
                pageLanguage: 'es', 
                includedLanguages: 'en,fr,it,pt,de', // Idiomas permitidos
                autoDisplay: false
            }, 'google_translate_element');
        } catch (error) {
            console.log('Google Translate no disponible:', error.message);
        }
    }
    
    // Cargar Google Translate con manejo de errores
    (function() {
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
        script.onerror = function() {
            console.log('Google Translate bloqueado o no disponible');
        };
        document.head.appendChild(script);
    })();
</script>

<script type="text/javascript">
    window.addEventListener('load', function() {
        // A. Detectamos el idioma del navegador del usuario (ej: 'en-US' o 'pt-BR')
        var idiomaUsuario = navigator.language || navigator.userLanguage; 
        idiomaUsuario = idiomaUsuario.split('-')[0]; // Nos quedamos solo con las dos letras ('en', 'pt', etc.)

        // B. Si el usuario NO habla espa√±ol, activamos la traducci√≥n
        if (idiomaUsuario !== 'es') {
            
            // Esperamos un segundo a que Google cargue en el fondo
            setTimeout(function() {
                var select = document.querySelector('select.goog-te-combo');
                if (select) {
                    select.value = idiomaUsuario; // Seleccionamos su idioma
                    select.dispatchEvent(new Event('change')); // ¬°Clic virtual!
                }
            }, 1000); // 1000ms = 1 segundo de espera
        }
    });
</script>

<style>
    .goog-te-banner-frame { display: none !important; }
    body { top: 0px !important; }
    #google_translate_element { display: none !important; }
</style>

<div style="position: fixed; top: 20px; left: 20px; z-index: 10000; display: flex; align-items: center; gap: 15px;">
        
        <button onclick="toggleMenu()" style="
            background: rgba(0, 0, 0, 0.6); 
            backdrop-filter: blur(5px);
            border: 1px solid rgba(0, 210, 255, 0.5); 
            color: #00d2ff; 
            font-size: 1.5em; 
            padding: 10px 15px; 
            border-radius: 10px; 
            cursor: pointer; 
            transition: 0.3s;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);">
            ‚ò∞
        </button>

{% if user.is_authenticated and user.perfil.suscripcion_activa %}
    <div class="notranslate" style="
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(5px);
        padding: 10px 20px;
        border-radius: 30px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        font-weight: bold;
        color: #fff;
        display: flex; align-items: center; gap: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.5);">
        
        <div style="width: 10px; height: 10px; background: #00d2ff; border-radius: 50%; box-shadow: 0 0 10px #00d2ff;"></div>
        TuClima <span style="color: #ffcc00;">PRO</span>
    </div>
{% endif %} </div>

    <div id="miSidebar" style="
        position: fixed;
        top: 0;
        left: -300px;
        width: 280px;
        height: 100vh;
        overflow-y: auto;
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(12px);
        border-right: 1px solid rgba(56, 189, 248, 0.2);
        box-shadow: 5px 0 30px rgba(0,0,0,0.7);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10001;
        padding: 28px 18px 18px 18px;
        text-align: left;
        display: flex;
        flex-direction: column;">

        <div style="display: flex; justify-content: flex-start; align-items: center; margin-bottom: 30px; border-bottom: 1px solid rgba(56,189,248,0.1); padding-bottom: 15px; position: relative;">
            <span style="color: #94a3b8; font-size: 0.75em; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; opacity: 0.9;">NAVEGACI√ìN</span>
            <button onclick="toggleMenu()" style="background: transparent; border: none; color: #64748b; font-size: 1em; cursor: pointer; border-radius: 6px; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; position: absolute; top: -8px; right: -8px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8'" onmouseout="this.style.background='transparent'; this.style.color='#64748b'">
                <svg style="width:14px; height:14px; stroke-width:2;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>

<div style="display: flex; flex-direction: column; gap: 8px;">
    
    <a href="/" style="text-decoration: none; color: #cbd5e1; padding: 12px 15px; border-radius: 8px; display: flex; align-items: center; gap: 12px; transition: 0.2s; position: relative; background: linear-gradient(90deg, rgba(56,189,248,0.10) 0%, rgba(56,189,248,0.03) 100%); border-left: 3px solid #38bdf8; box-shadow: 0 2px 8px 0 rgba(56,189,248,0.04);">
        <span style="display:inline-flex; align-items:center; justify-content:center;">
            <svg style="width:20px; height:20px; color:#38bdf8; stroke-width:1.7;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        </span>
        <span style="font-weight: 600; font-size: 0.92em; letter-spacing: 0.5px;">Inicio / General</span>
        <span style="position: absolute; left: 0; top: 8px; bottom: 8px; width: 3px; border-radius: 3px; background: linear-gradient(180deg, #38bdf8 0%, #0ea5e9 100%); box-shadow: 0 0 8px #38bdf8; opacity: 1;"></span>
    </a>

    <div style="color: #64748b; font-size: 0.72em; margin-top: 18px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; padding-left: 8px; opacity: 0.8;">MODOS PROFESIONALES</div>

    <a href="/agro?lat={{ lat }}&lon={{ lon }}" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 6.5-5.2 14.6l-3.3 2.6C13.5 18.3 8 15 4 10"></path></svg>
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Modo Agro</span>
    </a>
    
    <a href="/naval?lat={{ lat }}&lon={{ lon }}" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path></svg>
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Modo Naval</span>
    </a>
    
    <a href="/aereo?lat={{ lat }}&lon={{ lon }}" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
    <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.3c.4-.2.6-.6.5-1.1z"/>
    </svg>
    <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Modo A√©reo</span>
</a>
    
    <a href="/energia?lat={{ lat }}&lon={{ lon }}" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Modo Energ√≠as</span>
    </a>

    <div style="color: #64748b; font-size: 0.72em; margin-top: 20px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; padding-left: 8px; opacity: 0.8;">CIENCIA</div>

    <a href="/mapas/" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Mapas & Radar</span>
    </a>

    <a href="/ciencia/" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path></svg>
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Papers & ArXiv</span>
    </a>
    
<a href="/comparador/?lat={{ lat }}&lon={{ lon }}&ciudad={{ ciudad }}" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
    <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 3v18h18"></path>
        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
    </svg>
    <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Comparador Cient√≠fico</span>
</a>

<a href="{% url 'espacio' %}" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
    <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="M4.93 4.93l1.41 1.41"/><path d="M17.66 17.66l1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M6.34 17.66l-1.41 1.41"/><path d="M19.07 4.93l-1.41 1.41"/></svg>
    <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Meteorolog√≠a Espacial</span>
</a>

    <div style="color: #64748b; font-size: 0.72em; margin-top: 20px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; padding-left: 8px; opacity: 0.8;">PLATAFORMA</div>

    <a href="/ayuda/" style="text-decoration: none; color: #94a3b8; padding: 10px 16px; border-radius: 8px; transition: all 0.2s; display: flex; align-items: center; gap: 12px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Centro de Ayuda</span>
    </a>

<div class="sidebar-section" style="margin-top: 25px; border-top: 1px solid rgba(56,189,248,0.1); padding-top: 15px;">
    
    <div style="font-size: 0.72em; color: #64748b; margin-bottom: 8px; padding-left: 8px; letter-spacing: 1.5px; font-weight: 700; text-transform: uppercase; opacity: 0.8;">
        CONFIGURACI√ìN
    </div>

    <div onclick="toggleSidebarLang()" style="cursor: pointer; display: flex; align-items: center; padding: 10px 16px; color: #94a3b8; transition: all 0.2s; border-radius: 8px; margin-bottom: 4px;" onmouseover="this.style.background='rgba(56,189,248,0.1)'; this.style.color='#38bdf8';" onmouseout="this.style.background='transparent'; this.style.color='#94a3b8';">
        <svg style="width:17px; height:17px; margin-right: 12px; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        
        <span style="font-size: 0.88em; font-weight: 500; letter-spacing: 0.3px;">Idioma / Language</span>
        
        <svg id="lang-arrow" style="width:12px; height:12px; margin-left: auto; transition: 0.3s; stroke-width:1.5;" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9l6 6 6-6"/></svg>
    </div>

    <div id="sidebar-lang-list" style="display: none; background: rgba(0,0,0,0.3); margin: 5px 15px; border-radius: 8px; overflow: hidden;">
        
        <a href="#" onclick="Weglot.switchTo('es'); return false;" class="sl-item">
            <img src="https://flagcdn.com/w20/ar.png" width="20" style="margin-right:10px; opacity:0.8;"> 
            Espa√±ol
        </a>
        
        <a href="#" onclick="Weglot.switchTo('en'); return false;" class="sl-item">
            <img src="https://flagcdn.com/w20/us.png" width="20" style="margin-right:10px; opacity:0.8;"> 
            English
        </a>

    </div>
</div>

<script type="text/javascript" src="https://cdn.weglot.com/weglot.min.js"></script>
<script>
    // 1. INICIALIZAR MOTOR
    Weglot.initialize({
        api_key: 'wg_169c193b22e7a117be85a2f56113ab415', // Tu clave real
        hide_switcher: true,
        auto_switch: false 
    });

    // 2. FUNCI√ìN VISUAL DEL MEN√ö
    function toggleSidebarLang() {
        const list = document.getElementById('sidebar-lang-list');
        const arrow = document.getElementById('lang-arrow');
        
        if (list.style.display === 'none') {
            list.style.display = 'block';
            arrow.style.transform = 'rotate(180deg)';
        } else {
            list.style.display = 'none';
            arrow.style.transform = 'rotate(0deg)';
        }
    }
</script>

<style>
    .sl-item {
        display: flex; align-items: center;
        padding: 12px 20px;
        color: #cbd5e1; text-decoration: none; font-size: 0.9em;
        font-family: 'Segoe UI', sans-serif;
        border-bottom: 1px solid rgba(255,255,255,0.02);
        transition: 0.2s;
    }
    .sl-item:hover {
        background: rgba(56, 189, 248, 0.1);
        color: #38bdf8;
        padding-left: 25px;
    }
</style>

</div>



</div> 

    <script>
        function toggleMenu() {
            const sidebar = document.getElementById('miSidebar');
            if (sidebar.style.left === '0px') {
                sidebar.style.left = '-300px'; // Cerrar
            } else {
                sidebar.style.left = '0px'; // Abrir
            }
        }
    </script>

    <div style="height: 80px;"></div>    
    
    <div class="buscador" style="display: flex; flex-direction: column; justify-content: center; gap: 20px; align-items: center; margin-bottom: 40px; padding: 30px 20px; width: 100%; max-width: 800px;">
        
        <!-- Buscador Principal (actual) -->
        <div style="display: flex; justify-content: center; gap: 12px; align-items: center; width: 100%; max-width: 600px;">
            <form action="" method="get" style="display: flex; gap: 12px; align-items: center; width: 100%;">
            <input type="text" name="ciudad" placeholder="Buscar ciudad..." required 
               style="flex: 1; padding: 14px 24px; border-radius: 25px; border: 1.5px solid rgba(56, 189, 248, 0.6); outline: none; font-size: 1.1em; background: rgba(15, 23, 42, 0.8); color: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6), inset 0 0 15px rgba(56, 189, 248, 0.1); transition: all 0.3s ease; backdrop-filter: blur(10px);" onfocus="this.style.borderColor='#38bdf8'; this.style.boxShadow='0 4px 25px rgba(56, 189, 248, 0.4), inset 0 0 15px rgba(56, 189, 248, 0.2)'" onblur="this.style.borderColor='rgba(56, 189, 248, 0.6)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.6), inset 0 0 15px rgba(56, 189, 248, 0.1)';">
            <button type="submit" style="background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%); border: 2px solid #ffffff; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 8px 30px rgba(30, 64, 175, 0.4), 0 2px 10px rgba(255, 255, 255, 0.1); transition: all 0.3s ease; flex-shrink: 0; position: relative; overflow: hidden;" onmouseover="this.style.transform='scale(1.1) translateY(-2px)'; this.style.boxShadow='0 12px 40px rgba(30, 64, 175, 0.6), 0 4px 15px rgba(255, 255, 255, 0.2)'; this.style.borderColor='#f8fafc';" onmouseout="this.style.transform='scale(1) translateY(0)'; this.style.boxShadow='0 8px 30px rgba(30, 64, 175, 0.4), 0 2px 10px rgba(255, 255, 255, 0.1)'; this.style.borderColor='#ffffff';">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="#ffffff" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1 0 6.65 6.65a7.5 7.5 0 0 0 10.6 10.6z"/></svg>
            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%); transform: translateX(-100%); transition: transform 0.6s ease;"></div>
            </button>
            </form>
            <button onclick="usarGPS()" style="background: linear-gradient(135deg, #1e3a8a 0%, #1e293b 100%); border: 2px solid #ffffff; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 8px 30px rgba(30, 58, 138, 0.4), 0 2px 10px rgba(255, 255, 255, 0.1); transition: all 0.3s ease; flex-shrink: 0; position: relative; overflow: hidden;" title="Ubicaci√≥n Actual" onmouseover="this.style.transform='scale(1.1) translateY(-2px)'; this.style.boxShadow='0 12px 40px rgba(30, 58, 138, 0.6), 0 4px 15px rgba(255, 255, 255, 0.2)'; this.style.borderColor='#f8fafc';" onmouseout="this.style.transform='scale(1) translateY(0)'; this.style.boxShadow='0 8px 30px rgba(30, 58, 138, 0.4), 0 2px 10px rgba(255, 255, 255, 0.1)'; this.style.borderColor='#ffffff';">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="#ffffff" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
            </svg>
            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%); transform: translateX(-100%); transition: transform 0.6s ease;"></div>
            </button>
        </div>

        <div style="width: 100%; height: 2px;"></div>

        <!-- Efectos hover para botones del buscador -->
        <script>
            // A√±adir efecto de brillo a los botones del buscador
            document.addEventListener('DOMContentLoaded', function() {
                const searchButtons = document.querySelectorAll('button[type="submit"], button[onclick*="usarGPS"]');
                
                searchButtons.forEach(button => {
                    button.addEventListener('mouseenter', function() {
                        const shimmer = this.querySelector('div');
                        if (shimmer && shimmer.style.background.includes('gradient')) {
                            shimmer.style.transform = 'translateX(100%)';
                        }
                    });
                    
                    button.addEventListener('mouseleave', function() {
                        const shimmer = this.querySelector('div');
                        if (shimmer && shimmer.style.background.includes('gradient')) {
                            setTimeout(() => {
                                shimmer.style.transform = 'translateX(-100%)';
                            }, 300);
                        }
                    });
                });
            });
        </script>

        <!-- Estilos para ocultar flechas nativas y personalizar inputs -->
        <style>
            /* Ocultar flechas nativas de los inputs number */
            input[type="number"]::-webkit-outer-spin-button,
            input[type="number"]::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            input[type="number"] {
                -moz-appearance: textfield;
            }
            
            /* Estilos para las flechas personalizadas */
            .coord-input-container {
                position: relative;
                width: 180px;
            }
            
            .coord-arrows {
                position: absolute;
                right: 8px;
                top: 50%;
                transform: translateY(-50%);
                display: flex;
                flex-direction: column;
                gap: 2px;
            }
            
            .coord-arrow {
                width: 24px;
                height: 20px;
                background: rgba(56, 189, 248, 0.1);
                border: 1px solid rgba(56, 189, 248, 0.3);
                border-radius: 6px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.2s ease;
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
            }
            
            .coord-arrow:hover {
                background: rgba(56, 189, 248, 0.2);
                border-color: rgba(56, 189, 248, 0.6);
                transform: scale(1.1);
                box-shadow: 0 2px 8px rgba(56, 189, 248, 0.3);
            }
            
            .coord-arrow:active {
                transform: scale(0.95);
                background: rgba(56, 189, 248, 0.3);
            }
            
            .coord-arrow svg {
                width: 12px;
                height: 12px;
                stroke: #38bdf8;
                stroke-width: 2.5;
                transition: all 0.2s ease;
            }
            
            .coord-arrow:hover svg {
                stroke: #0ea5e9;
                transform: scale(1.1);
            }
        </style>

        <div style="display: flex; justify-content: center; width: 100%; margin-top: 20px;">
    <form method="get" style="display: flex; align-items: center; justify-content: center; gap: 40px; width: 100%; max-width: 700px; flex-wrap: nowrap;">
        
        <div class="coord-input-container">
            <input type="number" step="any" name="lat" id="latInput" placeholder="Latitud" required 
                style="padding: 12px 45px 12px 16px; width: 100%; border-radius: 20px; border: 1.5px solid rgba(56, 189, 248, 0.4); background: rgba(15, 23, 42, 0.7); color: white; outline: none; text-align: center; font-size: 1em; transition: all 0.3s ease; backdrop-filter: blur(5px); box-sizing: border-box;" 
                onfocus="this.style.borderColor='#38bdf8'; this.style.boxShadow='0 0 15px rgba(56, 189, 248, 0.3)';" 
                onblur="this.style.borderColor='rgba(56, 189, 248, 0.4)'; this.style.boxShadow='none'"
                min="-90" max="90">
            
            <div class="coord-arrows">
                <div class="coord-arrow" onclick="incrementInput('latInput')" title="Aumentar latitud">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M7 14l5-5 5 5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="coord-arrow" onclick="decrementInput('latInput')" title="Disminuir latitud">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M7 10l5 5 5-5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
        </div>

        <div class="coord-input-container">
            <input type="number" step="any" name="lon" id="lonInput" placeholder="Longitud" required 
                style="padding: 12px 45px 12px 16px; width: 100%; border-radius: 20px; border: 1.5px solid rgba(56, 189, 248, 0.4); background: rgba(15, 23, 42, 0.7); color: white; outline: none; text-align: center; font-size: 1em; transition: all 0.3s ease; backdrop-filter: blur(5px); box-sizing: border-box;" 
                onfocus="this.style.borderColor='#38bdf8'; this.style.boxShadow='0 0 15px rgba(56, 189, 248, 0.3)';" 
                onblur="this.style.borderColor='rgba(56, 189, 248, 0.4)'; this.style.boxShadow='none'"
                min="-180" max="180">
            
            <div class="coord-arrows">
                <div class="coord-arrow" onclick="incrementInput('lonInput')" title="Aumentar longitud">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M7 14l5-5 5 5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="coord-arrow" onclick="decrementInput('lonInput')" title="Disminuir longitud">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M7 10l5 5 5-5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
        </div>

        <button type="submit" style="margin-left: 15px; background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%); border: 2px solid #ffffff; padding: 12px 30px; border-radius: 20px; cursor: pointer; font-weight: 600; color: white; transition: all 0.3s ease; font-size: 1em; box-shadow: 0 6px 25px rgba(30, 64, 175, 0.4), 0 2px 10px rgba(255, 255, 255, 0.1); display: flex; align-items: center; justify-content: center; flex-shrink: 0; position: relative; overflow: hidden;" 
            onmouseover="this.style.transform='translateY(-3px) scale(1.08)'; this.style.boxShadow='0 10px 35px rgba(30, 64, 175, 0.6), 0 4px 15px rgba(255, 255, 255, 0.2)'; this.style.borderColor='#f8fafc';" 
            onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 6px 25px rgba(30, 64, 175, 0.4), 0 2px 10px rgba(255, 255, 255, 0.1)'; this.style.borderColor='#ffffff';">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="#ffffff" stroke-width="2.8" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));"><path d="M5 12h14M13 6l6 6-6 6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.15) 50%, transparent 70%); transform: translateX(-100%); transition: transform 0.6s ease;"></div>
        </button>

    </form>
</div>

        <script>
        window.onload = function() {
            if (window.location.search === "") {
            usarGPS();
            }
        };

        function usarGPS() {
            if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                const urlParams = new URLSearchParams(window.location.search);
                const latActual = urlParams.get('lat');
                if (!latActual) {
                window.location.href = `/?lat=${lat}&lon=${lon}`;
                }
            }, function(error) { console.log("GPS no disponible"); });
            }
        }
        
        // Funciones para controlar las flechas personalizadas
        function incrementInput(inputId) {
            const input = document.getElementById(inputId);
            const currentValue = parseFloat(input.value) || 0;
            const step = 0.1;
            let newValue = currentValue + step;
            
            // Validar l√≠mites seg√∫n el tipo de coordenada
            if (inputId === 'latInput') {
                newValue = Math.min(90, newValue);
            } else if (inputId === 'lonInput') {
                newValue = Math.min(180, newValue);
            }
            
            input.value = parseFloat(newValue.toFixed(6));
            
            // Animaci√≥n de confirmaci√≥n
            input.style.borderColor = '#22c55e';
            setTimeout(() => {
                input.style.borderColor = '#38bdf8';
            }, 200);
        }
        
        function decrementInput(inputId) {
            const input = document.getElementById(inputId);
            const currentValue = parseFloat(input.value) || 0;
            const step = 0.1;
            let newValue = currentValue - step;
            
            // Validar l√≠mites seg√∫n el tipo de coordenada
            if (inputId === 'latInput') {
                newValue = Math.max(-90, newValue);
            } else if (inputId === 'lonInput') {
                newValue = Math.max(-180, newValue);
            }
            
            input.value = parseFloat(newValue.toFixed(6));
            
            // Animaci√≥n de confirmaci√≥n
            input.style.borderColor = '#22c55e';
            setTimeout(() => {
                input.style.borderColor = '#38bdf8';
            }, 200);
        }
        
        // Funcionalidad de teclado para incrementar/decrementar con flechas
        document.addEventListener('DOMContentLoaded', function() {
            const latInput = document.getElementById('latInput');
            const lonInput = document.getElementById('lonInput');
            
            if (latInput) {
                latInput.addEventListener('keydown', function(e) {
                    if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        incrementInput('latInput');
                    } else if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        decrementInput('latInput');
                    }
                });
            }
            
            if (lonInput) {
                lonInput.addEventListener('keydown', function(e) {
                    if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        incrementInput('lonInput');
                    } else if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        decrementInput('lonInput');
                    }
                });
            }
        });
        </script>

    <div class="card" style="margin: 0 auto; display: flex; flex-direction: column; align-items: center; text-align: center;">
        <h3>El clima en:</h3>
        <h1>{{ ciudad }}</h1>
        <p style="font-size: 1.1em; color: #ddd;">{{ pais }}</p>
        <div style="background: rgba(0,0,0,0.4); display: inline-block; padding: 5px 15px; border-radius: 20px; margin-top: 5px; border: 1px solid rgba(255,255,255,0.2);">
             Hora local: <span style="color: #ffcc00; font-weight: bold;">{{ hora_local|date:"H:i" }}</span>
        </div>
        <hr style="border-color: #aaa; opacity: 0.3; margin-top: 15px; width: 80%;">
        <img src="{{ icono }}" class="icono-principal">
        <h2 style="color: #00d2ff; margin-top: -10px; margin-bottom: 20px;">{{ descripcion }}</h2>
        <div style="margin-bottom: 20px;">
            <div class="etiqueta" style="margin-bottom: 5px;">TEMPERATURA ACTUAL</div>
            <div class="dato-grande" data-wg-notranslate style="line-height: 1;">{{ temp }}¬∞C</div>
        </div>
        
        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin: 20px 0; display: flex; justify-content: space-around; align-items: center; border: 1px solid rgba(255,255,255,0.1); gap: 15px;">
            <div style="text-align: center; flex: 1;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/thermometer.svg" style="width: 35px; height: 35px; margin-bottom: 5px;">
                <div style="font-size: 0.7em; color: #ddd;">SENSACI√ìN</div>
                <div style="font-weight: bold; font-size: 1.2em; color: #ffcc00;">{{ sensacion }}¬∞</div>
            </div>
            <div style="width: 2px; height: 50px; background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.3), transparent); border-radius: 1px;"></div>
            <div style="text-align: center; flex: 1;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/humidity.svg" style="width: 35px; height: 35px; margin-bottom: 5px;">
                <div style="font-size: 0.7em; color: #ddd;">HUMEDAD</div>
                <div style="font-weight: bold; font-size: 1.2em; color: #00d2ff;">{{ humedad }}%</div>
            </div>
            <div style="width: 2px; height: 50px; background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.3), transparent); border-radius: 1px;"></div>
            <div style="text-align: center; flex: 1;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/raindrops.svg" style="width: 35px; height: 35px; margin-bottom: 5px;">
                <div style="font-size: 0.7em; color: #ddd;">LLUVIA</div>
                <div style="font-weight: bold; font-size: 1.2em; color: #fff;">{{ lluvia_hoy }}mm</div>
            </div>
        </div>

        <div style="background: rgba(0,0,0,0.3); padding: 15px 25px; border-radius: 18px; margin: 20px 0; display: inline-flex; gap: 50px; align-items: center;">
            <div style="text-align: center;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/sunrise.svg" style="width: 55px; height: 55px; margin-bottom: 8px;">
                <div style="font-size: 0.85em; color: #ddd;">AMANECER</div>
                <div style="font-weight: bold; color: #ffcc00; font-size: 1.1em;">{{ sunrise }}</div>
            </div>
            <div style="text-align: center;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/sunset.svg" style="width: 55px; height: 55px; margin-bottom: 8px;">
                <div style="font-size: 0.85em; color: #ddd;">ATARDECER</div>
                <div style="font-weight: bold; color: #ff6b6b; font-size: 1.1em;">{{ sunset }}</div>
            </div>
        </div>

        <div class="etiqueta">VIENTO</div>
    
    <div style="font-size: 1.5em; display: flex; align-items: center; justify-content: center; gap: 10px;">
        <svg style="width:28px; height:28px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"/></svg>
        {{ viento }} km/h
    </div>
    
    <p class="coord">Lat: {{ lat }} | Lon: {{ lon }}</p>
</div>

<br><br>

<h2 style="color: #eee; text-shadow: 1px 1px 2px black; display: flex; align-items: center; justify-content: center; gap: 10px;">
    <svg style="width:24px; height:24px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
    Calendario de Pron√≥stico
</h2>

<div class="contenedor-dias" id="listaDias" style="margin: 0 auto; display: flex; justify-content: center; align-items: center;">
    {% for dia in pronostico %}
    <div class="tarjeta-dia {% if forloop.first %}dia-activo{% endif %}" 
         onclick="cambiarDia('{{ dia.fecha_full }}', '{{ dia.nombre_dia }}', '{{ dia.fecha_corta }}', this)">
        <div style="font-weight: bold; font-size: 0.9em; margin-bottom: 5px;">{{ dia.nombre_dia }}</div>
        <div class="fecha" style="font-size: 0.8em; color: #ccc;">{{ dia.fecha_corta }}</div>
        <img src="{{ dia.icono }}" class="icono-chico">
        <div class="temp-rango">
            <span class="max">{{ dia.max }}¬∞</span> 
            <span class="min">{{ dia.min }}¬∞</span>
        </div>
    </div>
    {% endfor %}
</div>

    <br>

    <div style="width: 100%; max-width: 1000px; margin: 0 auto; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); padding: 30px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.5);">
        <h3 id="tituloHoras" style="color: #00d2ff; margin-bottom: 20px; text-align: center; font-size: 1.3em;">Pron√≥stico por Horas (HOY)</h3>
        
        <div class="carrusel-horas" id="carruselHoras">
            {% for h in tira_horas %}
            {% if h.tipo == 'evento' %}
            <div class="item-hora evento-solar">
                <span style="color: #fff; font-weight: bold; font-size: 1em;">{{ h.hora }}</span>
                <img src="{{ h.icono }}" class="icono-hora">
                <span style="color: #ffcc00; font-weight: bold; font-size: 0.8em; margin-top: 5px;">{{ h.evento_titulo }}</span>
            </div>
            {% else %}
            <div class="item-hora {% if h.es_actual %}hora-destacada{% endif %}">
                <span style="color: #ccc; font-size: 0.9em;">{{ h.hora }}</span>
                <img src="{{ h.icono }}" class="icono-hora">
                <span style="color: #ffcc00; font-weight: bold; font-size: 1.1em;">{{ h.temp }}¬∞</span>
                
                <span style="font-size: 0.8em; color: #4ecdc4; margin-top: 4px; display: flex; align-items: center; justify-content: center; gap: 4px;">
                    <svg style="width:12px; height:12px;" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                        <path d="M12 2.69l5.74 5.82a7 7 0 0 1 0 9.88l-5.74 5.81l-5.74-5.81a7 7 0 0 1 0-9.88Z"/>
                    </svg>
                    {{ h.lluvia }}%
                </span>

                {% if h.es_actual %}
                <div style="font-size: 0.7em; color: #00d2ff; font-weight: bold; margin-top: 8px;">AHORA</div>
                {% endif %}
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <canvas id="graficoHoras" style="margin-top: 20px;"></canvas>
    </div>

    <br><br><hr style="border-color: #aaa; margin: 40px 0; opacity: 0.5;">

    <h2 style="color: #ffcc00; text-align: left; margin-left: 20px; text-shadow: 1px 1px 2px black; display: flex; align-items: center; gap: 10px;">
        <svg style="width:28px; height:28px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Detalles y Precauciones
    </h2>
    
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 0 20px; max-width: 1200px; margin: 0 auto;">
        
        <div style="background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 20px; width: 250px; text-align: left;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/clear-day.svg" style="width: 30px; height: 30px;">
                <div style="color: #ccc; font-size: 0.9em;">√çNDICE UV M√ÅXIMO</div>
            </div>
            <div style="font-size: 2.5em; font-weight: bold; color: {% if uv_index > 7 %}#ff4757{% elif uv_index > 4 %}#ffa502{% else %}#2ed573{% endif %};">
                {{ uv_index }}
            </div>
            
            <div style="font-size: 0.8em; color: #ddd; display: flex; align-items: center; gap: 6px;">
                {% if uv_index > 10 %}Extremo 
                    <svg style="width:16px; height:16px; color:#ff4757;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                {% elif uv_index > 7 %}Muy Alto 
                    <svg style="width:16px; height:16px; color:#ff4757;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                {% elif uv_index > 5 %}Alto 
                    <svg style="width:16px; height:16px; color:#ffa502;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                {% elif uv_index > 2 %}Moderado 
                    <svg style="width:16px; height:16px; color:#ffa502;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                {% else %}Bajo 
                    <svg style="width:16px; height:16px; color:#2ed573;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                {% endif %}
            </div>

            <div style="width: 100%; height: 5px; background: #333; margin-top: 10px; border-radius: 5px;">
                <div style="width: {{ uv_index|make_list|length|add:uv_index|add:0 }}0%; max-width: 100%; height: 100%; background: linear-gradient(90deg, #2ed573, #ffa502, #ff4757); border-radius: 5px;"></div>
            </div>
        </div>

        <div style="background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 20px; width: 250px; text-align: left;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/cloudy.svg" style="width: 30px; height: 30px;">
                <div style="color: #ccc; font-size: 0.9em;">FORMACI√ìN DE NUBES</div>
            </div>
            <div style="font-size: 1.2em; font-weight: bold; color: #fff; margin-bottom: 5px;">{{ tipo_nube }}</div>
            <div style="font-size: 0.8em; color: #aaa;">Observaci√≥n Satelital</div>
            <div style="margin-top: 10px; text-align: right;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/overcast.svg" style="width: 55px; height: 55px; opacity: 0.8;">
            </div>
        </div>

        <div style="background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 20px; width: 250px; text-align: left;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/fog.svg" style="width: 25px; height: 25px;">
                <div style="color: #ccc; font-size: 0.9em;">VISIBILIDAD</div>
            </div>
            <div style="font-size: 1.5em; font-weight: bold; color: #fff;">{{ visibilidad }} km</div>
            <hr style="border-color: #444; margin: 10px 0;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                <img src="https://bmcdn.nl/assets/weather-icons/v3.0/fill/svg/hurricane.svg" style="width: 25px; height: 25px;">
                <div style="color: #ccc; font-size: 0.9em;">PRESI√ìN</div>
            </div>
            <div style="font-size: 1.5em; font-weight: bold; color: #00d2ff;">{{ presion }} hPa</div>
        </div>

        <div style="background: rgba(0,0,0,0.4); border: 2px solid {{ alerta_color }}; padding: 25px 20px; border-radius: 20px; width: 250px; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 0 20px {{ alerta_color }}40;">
    
    <div style="color: {{ alerta_color }}; margin-bottom: 15px;">
        
        {% if alerta_tipo == 'tormenta' %}
            <svg style="width:60px; height:60px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
        
        {% elif alerta_tipo == 'nieve' %}
            <svg style="width:60px; height:60px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="2" x2="12" y2="22"></line><line x1="12" y1="2" x2="12.01" y2="2"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="20.66" y1="7" x2="3.34" y2="17"></line><line x1="20.66" y1="7" x2="20.67" y2="7"></line><line x1="3.34" y1="17" x2="3.35" y2="17"></line><line x1="20.66" y1="17" x2="3.34" y2="7"></line><line x1="20.66" y1="17" x2="20.67" y2="17"></line><line x1="3.34" y1="7" x2="3.35" y2="7"></line></svg>
        
        {% elif alerta_tipo == 'lluvia' %}
            <svg style="width:60px; height:60px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path></svg>
        
        {% elif alerta_tipo == 'niebla' %}
            <svg style="width:60px; height:60px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M4 18h16"></path><path d="M6 6h12"></path></svg>
        
        {% elif alerta_tipo == 'calor' %}
            <svg style="width:60px; height:60px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/><path d="M12 2v2"/><path d="M12 14v.01"/></svg>
        
        {% else %}
            <svg style="width:60px; height:60px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
        {% endif %}
        
    </div>

    <div style="color: {{ alerta_color }}; font-weight: 800; font-size: 0.85em; text-transform: uppercase; margin-bottom: 8px; letter-spacing: 1px;">
        PRECAUCI√ìN SUGERIDA
    </div>
    
    <div style="color: #fff; font-weight: 600; font-size: 1em; line-height: 1.4;">
        {{ alerta_texto }}
    </div>
</div>

<div style="background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 20px; width: 250px; text-align: left; position: relative; overflow: hidden;">
    
    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
        <svg style="width: 24px; height: 24px; color: #cbd5e1;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/><path d="M12 2v2"/><path d="M12 14v.01"/><path d="M20 10h2"/><path d="M20 14h2"/><path d="M2 10h2"/><path d="M2 14h2"/></svg>
        <div style="color: #ccc; font-size: 0.8em; font-weight: 800; letter-spacing: 1px; text-transform: uppercase;">ANOMAL√çA CLIM√ÅTICA</div>
    </div>

    {% if delta_temp > 1.5 %}
        <div style="display: flex; align-items: center; gap: 8px;">
            <svg style="width:32px; height:32px; color: #ff4757; filter: drop-shadow(0 0 8px rgba(255, 71, 87, 0.5));" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>
            <div style="font-size: 2.2em; font-weight: 800; color: #ff4757; text-shadow: 0 0 15px rgba(255, 71, 87, 0.3);">
                +{{ delta_temp }}¬∞C
            </div>
        </div>
        <div style="font-size: 0.9em; color: #ff4757; font-weight: 600; margin-top: 5px;">Sobre el promedio hist√≥rico.</div>
        
        <div style="position: absolute; right: -20px; bottom: -20px; opacity: 0.1; color: #ff4757;">
            <svg style="width:100px; height:100px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><path d="M12 2v2"/><path d="M12 14v.01"/><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>
        </div>

    {% elif delta_temp < -1.5 %}
        <div style="display: flex; align-items: center; gap: 8px;">
            <svg style="width:32px; height:32px; color: #38bdf8; filter: drop-shadow(0 0 8px rgba(56, 189, 248, 0.5));" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
            <div style="font-size: 2.2em; font-weight: 800; color: #38bdf8; text-shadow: 0 0 15px rgba(56, 189, 248, 0.3);">
                {{ delta_temp }}¬∞C
            </div>
        </div>
        <div style="font-size: 0.9em; color: #38bdf8; font-weight: 600; margin-top: 5px;">Bajo el promedio hist√≥rico.</div>
        
        <div style="position: absolute; right: -20px; bottom: -20px; opacity: 0.1; color: #38bdf8;">
            <svg style="width:100px; height:100px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><line x1="12" y1="2" x2="12" y2="22"></line><line x1="20.66" y1="7" x2="3.34" y2="17"></line><line x1="20.66" y1="17" x2="3.34" y2="7"></line></svg>
        </div>

    {% else %}
        <div style="display: flex; align-items: center; gap: 8px;">
            <svg style="width:32px; height:32px; color: #2ed573; filter: drop-shadow(0 0 8px rgba(46, 213, 115, 0.5));" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            <div style="font-size: 2.2em; font-weight: 800; color: #2ed573; text-shadow: 0 0 15px rgba(46, 213, 115, 0.3);">
                {{ delta_temp }}¬∞C
            </div>
        </div>
        <div style="font-size: 0.9em; color: #2ed573; font-weight: 600; margin-top: 5px;">Dentro del rango normal.</div>
    {% endif %}

    <div style="font-size: 0.7em; color: #64748b; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 8px;">
        Comparativa: Promedio de los ultimos 3 a√±os.
    </div>
</div>

    </div>

    <br><br><hr style="border-color: #aaa; margin: 40px 0; opacity: 0.5;">
    
    <h2 style="color: #ffcc00; text-align: left; margin-left: 20px; text-shadow: 1px 1px 2px black; display: flex; align-items: center; gap: 10px;">
        <svg style="width:28px; height:28px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6Z"/></svg>
        Alertas y Noticias Globales
    </h2>

    <div class="contenedor-noticias" id="noticias-container" style="display: flex; justify-content: center; align-items: center; min-height: 200px; max-width: 1200px; margin: 0 auto;">
        <div style="text-align: center; color: #94a3b8;">
            <svg style="width:40px; height:40px; animation: spin 2s linear infinite;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
            <p>Cargando noticias meteorol√≥gicas recientes...</p>
        </div>
    </div>

    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .contenedor-noticias {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .tarjeta-noticia-mejorada {
            background: #1e293b;
            border-radius: 15px;
            overflow: hidden;
            text-align: left;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(56, 189, 248, 0.2);
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 480px;
        }
        
        .tarjeta-noticia-mejorada:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(56, 189, 248, 0.2);
            border-color: rgba(56, 189, 248, 0.5);
        }
        
        .foto-noticia-mejorada {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #00d2ff, #0f172a);
            object-fit: cover;
            display: block;
        }
        
        .contenido-nota {
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .contenido-nota > * {
            margin: 0;
        }
        
        .noticia-titulo {
            color: #fff;
            font-size: 0.95em;
            line-height: 1.3;
            font-weight: 600;
            margin: 10px 0;
            flex-shrink: 0;
        }
        
        .noticia-descripcion {
            font-size: 0.85em;
            color: #cbd5e1;
            line-height: 1.4;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            margin-bottom: 12px;
        }
        
        .noticia-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            margin-top: auto;
        }
    </style>

    <script>
        function formatearFecha(fecha) {
            const ahora = new Date();
            const fechaNoticia = new Date(fecha);
            const diferencia = Math.floor((ahora - fechaNoticia) / 1000);
            
            if (diferencia < 60) return 'Hace unos segundos';
            if (diferencia < 3600) return `Hace ${Math.floor(diferencia / 60)} min`;
            if (diferencia < 86400) return `Hace ${Math.floor(diferencia / 3600)} h`;
            if (diferencia < 604800) return `Hace ${Math.floor(diferencia / 86400)} d√≠as`;
            
            return fechaNoticia.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' });
        }
        
        function esNoticiaMeteorologia(titulo, descripcion) {
            const contenido = (titulo + ' ' + descripcion).toLowerCase();
            const palabrasMeteo = ['clima', 'meteorolog', 'temperatura', 'lluvia', 'nieve', 'tormenta', 'viento', 'granizo', 'huracan', 'ciclon', 'presion', 'humedad', 'pronostico', 'frente frio', 'onda de calor', 'fenomeno', 'precipitacion', 'alerta', 'advertencia', 'temporal', 'desastre natural', 'inundacion', 'sequia', 'atmofera', 'clima'];
            return palabrasMeteo.some(palabra => contenido.includes(palabra));
        }
        
        async function cargarNoticias() {
            try {
                const container = document.getElementById('noticias-container');
                const feedURL = 'https://news.google.com/rss/search?q=clima+meteorologia+temperatura&hl=es-419&gl=AR';
                const rss2jsonAPI = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedURL)}`;
                
                const response = await fetch(rss2jsonAPI);
                
                if (!response.ok) throw new Error('Error al obtener noticias');
                
                const datos = await response.json();
                let noticias = datos.items || [];
                
                // Filtrar solo noticias meteorol√≥gicas
                noticias = noticias.filter(nota => 
                    esNoticiaMeteorologia(nota.title || '', nota.description || '')
                );
                
                if (noticias.length === 0) {
                    container.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 40px; grid-column: 1/-1;">No hay noticias meteorol√≥gicas disponibles en este momento.</p>';
                    return;
                }
                
                container.innerHTML = '';
                container.style.display = 'grid';
                container.style.gridTemplateColumns = 'repeat(auto-fit, minmax(300px, 1fr))';
                container.style.gap = '20px';
                container.style.padding = '20px';
                container.style.maxWidth = '1200px';
                container.style.margin = '0 auto';
                
                noticias.slice(0, 6).forEach((nota, index) => {
                    const tarjeta = document.createElement('div');
                    tarjeta.className = 'tarjeta-noticia-mejorada';
                    tarjeta.style.animation = `fadeInUp 0.5s ease forwards`;
                    tarjeta.style.animationDelay = `${index * 0.1}s`;
                    
                    // Extraer imagen del contenido si existe
                    let imagenURL = '';
                    let tieneImagen = false;
                    if (nota.content) {
                        const imgMatch = nota.content.match(/<img[^>]+src="([^">]+)"/);
                        if (imgMatch && imgMatch[1]) {
                            imagenURL = imgMatch[1];
                            tieneImagen = true;
                        }
                    }
                    
                    // Crear contenido visual
                    const contenidoVisual = tieneImagen ? 
                        `<img src="${imagenURL}" alt="${nota.title}" class="foto-noticia-mejorada" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div style="display: none; width: 100%; height: 100%; background: linear-gradient(135deg, #0f172a, #1e293b); align-items: center; justify-content: center; flex-direction: column; color: #38bdf8; font-size: 1.2em;">
                            <div style="font-size: 2em; margin-bottom: 8px;">üå¶Ô∏è</div>
                            <div style="font-weight: 600; text-align: center;">Meteorolog√≠a</div>
                        </div>` :
                        `<div style="width: 100%; height: 100%; background: linear-gradient(135deg, #0f172a, #1e293b); display: flex; align-items: center; justify-content: center; flex-direction: column; color: #38bdf8; font-size: 1.2em;">
                            <div style="font-size: 2em; margin-bottom: 8px;">üå¶Ô∏è</div>
                            <div style="font-weight: 600; text-align: center;">Meteorolog√≠a</div>
                        </div>`;
                    
                    tarjeta.innerHTML = `
                        <div style="position: relative; width: 100%; height: 160px; background: linear-gradient(135deg, #0f172a, #1e293b); overflow: hidden;">
                            ${contenidoVisual}
                            <div style="position: absolute; top: 10px; right: 10px; background: rgba(255, 152, 0, 0.9); color: white; padding: 4px 10px; border-radius: 4px; font-size: 0.7em; font-weight: bold;">
                                üå¶Ô∏è CLIMA
                            </div>
                        </div>
                        <div class="contenido-nota">
                            <div style="font-size: 0.75em; background: rgba(56, 189, 248, 0.25); color: #38bdf8; padding: 4px 10px; border-radius: 4px; display: inline-block; margin-bottom: 10px; font-weight: 600;">
                                ${nota.source || 'Google News'}
                            </div>
                            <h3 class="noticia-titulo">
                                ${nota.title}
                            </h3>
                            <p class="noticia-descripcion">
                                ${nota.description || nota.content?.replace(/<[^>]*>/g, '').substring(0, 120) + '...'}
                            </p>
                            <div class="noticia-footer">
                                <span style="font-size: 0.75em; color: #94a3b8;">
                                    ${formatearFecha(nota.pubDate)}
                                </span>
                                <span style="font-size: 0.7em; color: #38bdf8; background: rgba(56, 189, 248, 0.15); padding: 2px 6px; border-radius: 3px;">
                                    LIVE
                                </span>
                            </div>
                            <a href="${nota.link}" target="_blank" rel="noopener noreferrer" style="background: transparent; border: 1px solid #00d2ff; color: #00d2ff; padding: 6px 12px; border-radius: 20px; margin-top: 10px; cursor: pointer; font-size: 0.8em; text-decoration: none; display: inline-flex; align-items: center; gap: 6px; transition: 0.3s; width: fit-content;">
                                Leer m√°s 
                                <svg style="width:12px; height:12px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg>
                            </a>
                        </div>
                    `;
                    container.appendChild(tarjeta);
                });
                
                console.log(`‚úÖ ${Math.min(noticias.length, 6)} noticias meteorol√≥gicas cargadas`);
                
            } catch (error) {
                console.error('‚ùå Error al cargar noticias:', error);
                const container = document.getElementById('noticias-container');
                container.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 40px; grid-column: 1/-1;">Error al cargar las noticias.</p>';
            }
        }
        
        // Agregar animaci√≥n fadeInUp
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
        
        // Cargar noticias al iniciar
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', cargarNoticias);
        } else {
            cargarNoticias();
        }
        
        // Actualizar noticias cada 30 minutos
        setInterval(cargarNoticias, 30 * 60 * 1000);
    </script>

    <script>
        const datosSemana = JSON.parse('{{ datos_json|safe }}');
        let labelsIniciales = {{ horas_grafico|safe }};
        let tempsIniciales = {{ temps_grafico|safe }};
        
        const ctx = document.getElementById('graficoHoras');
        let chartInstance = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labelsIniciales, 
                datasets: [{
                    label: 'Temperatura (¬∞C)',
                    data: tempsIniciales,
                    borderWidth: 3,
                    borderColor: '#ffcc00',
                    backgroundColor: 'rgba(255, 204, 0, 0.2)',
                    tension: 0.4,
                    pointRadius: 0,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                    x: { ticks: { color: '#ccc' }, grid: { display: false } },
                    y: { ticks: { color: '#ccc' }, grid: { color: 'rgba(255,255,255,0.1)' } }
                }
            }
        });

        function cambiarDia(fechaFull, nombreDia, fechaCorta, elementoClick) {
            document.querySelectorAll('.tarjeta-dia').forEach(el => el.classList.remove('dia-activo'));
            elementoClick.classList.add('dia-activo');
            document.getElementById('tituloHoras').innerText = `Pron√≥stico por Horas (${nombreDia} ${fechaCorta})`;

            const datosDelDia = datosSemana[fechaFull];
            
            if (datosDelDia) {
                const contenedor = document.getElementById('carruselHoras');
                contenedor.innerHTML = '';
                
                let nuevosLabels = [];
                let nuevasTemps = [];

                datosDelDia.forEach(h => {
                    if (h.tipo === 'normal') {
                        nuevosLabels.push(h.hora);
                        nuevasTemps.push(h.temp);
                    }

                    let htmlHora = '';
                    if (h.tipo === 'evento') {
                        htmlHora = `
                            <div class="item-hora evento-solar">
                                <span style="color: #fff; font-weight: bold; font-size: 1em;">${h.hora}</span>
                                <img src="${h.icono}" class="icono-hora">
                                <span style="color: #ffcc00; font-weight: bold; font-size: 0.8em; margin-top: 5px;">${h.evento_titulo}</span>
                            </div>
                        `;
                    } else {
                        let claseExtra = h.es_actual ? 'hora-destacada' : '';
                        let etiquetaAhora = h.es_actual ? '<div style="font-size: 0.7em; color: #00d2ff; font-weight: bold; margin-top: 8px;">AHORA</div>' : '';
                        htmlHora = `
                            <div class="item-hora ${claseExtra}">
                                <span style="color: #ccc; font-size: 0.9em;">${h.hora}</span>
                                <img src="${h.icono}" class="icono-hora">
                                <span style="color: #ffcc00; font-weight: bold; font-size: 1.1em;">${h.temp}¬∞</span>
                                <span style="font-size: 0.8em; color: #4ecdc4; margin-top: 4px;">üíß${h.lluvia}%</span>
                                ${etiquetaAhora}
                            </div>
                        `;
                    }
                    contenedor.innerHTML += htmlHora;
                });

                chartInstance.data.labels = nuevosLabels;
                chartInstance.data.datasets[0].data = nuevasTemps;
                chartInstance.update();
            }
        }
    </script>
<br><br><hr style="border-color: #aaa; margin: 40px 0; opacity: 0.3;">

    <h2 id="papers" style="color: #a29bfe; text-align: left; margin-left: 20px; text-shadow: 1px 1px 2px black; display: flex; align-items: center; gap: 10px;">
        <svg style="width:32px; height:32px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path></svg>
        Papers y Publicaciones Cient√≠ficas
        <span style="font-size: 0.5em; background: #6c5ce7; padding: 2px 8px; border-radius: 10px; color: white;">ArXiv API</span>
    </h2>
    
    <div id="papers-container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; min-height: 200px; align-items: center; max-width: 1200px; margin: 0 auto;">
        <div style="text-align: center; color: #94a3b8;">
            <svg style="width:40px; height:40px; animation: spin 2s linear infinite;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
            <p>Cargando papers meteorol√≥gicos de ArXiv...</p>
        </div>
    </div>

    <script>
        async function cargarPapersArxiv() {
            try {
                const container = document.getElementById('papers-container');
                const response = await fetch('/api/papers/');
                
                if (!response.ok) {
                    throw new Error(`Error al obtener papers: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                const papers = data.papers || [];
                
                if (papers.length === 0) {
                    container.innerHTML = '<p style="color: #94a3b8; grid-column: 1/-1;">No hay papers meteorol√≥gicos disponibles en este momento.</p>';
                    return;
                }
                
                container.innerHTML = '';
                container.style.display = 'flex';
                container.style.flexWrap = 'wrap';
                container.style.justifyContent = 'center';
                
                papers.forEach((paper, index) => {
                    const fecha = paper.fecha ? new Date(paper.fecha).toLocaleDateString('es-ES', { year: 'numeric', month: 'short', day: 'numeric' }) : '';
                    const pdfLink = paper.link.replace('/abs/', '/pdf/') + '.pdf';
                    
                    const tarjeta = document.createElement('div');
                    tarjeta.style.cssText = 'background: rgba(10, 10, 20, 0.8); border-left: 4px solid #a29bfe; padding: 20px; border-radius: 10px; width: 350px; text-align: left; transition: transform 0.3s, box-shadow 0.3s; animation: fadeInUp 0.5s ease forwards; cursor: pointer;';
                    tarjeta.style.animationDelay = `${index * 0.1}s`;
                    
                    tarjeta.addEventListener('mouseenter', () => {
                        tarjeta.style.transform = 'translateY(-5px)';
                        tarjeta.style.boxShadow = '0 8px 20px rgba(162, 155, 254, 0.3)';
                    });
                    
                    tarjeta.addEventListener('mouseleave', () => {
                        tarjeta.style.transform = 'translateY(0)';
                        tarjeta.style.boxShadow = 'none';
                    });
                    
                    tarjeta.innerHTML = `
                        <div style="font-size: 0.8em; color: #a29bfe; margin-bottom: 5px;">
                            ${fecha} | ${paper.autor.split(' ')[0]}
                        </div>
                        <h4 style="margin: 5px 0; color: #eee; line-height: 1.4; font-size: 0.95em;">
                            ${paper.titulo}
                        </h4>
                        <p style="font-size: 0.85em; color: #aaa; height: 60px; overflow: hidden; text-overflow: ellipsis; line-height: 1.5;">
                            ${paper.resumen}
                        </p>
                        <a href="${pdfLink}" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: #fff; background: #6c5ce7; padding: 5px 15px; border-radius: 20px; font-size: 0.8em; display: inline-flex; align-items: center; gap: 6px; margin-top: 10px; transition: 0.3s;" onmouseover="this.style.background='#7c69d0'" onmouseout="this.style.background='#6c5ce7'">
                            <svg style="width:14px; height:14px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
                            Leer PDF
                        </a>
                    `;
                    
                    container.appendChild(tarjeta);
                });
                
                console.log(`‚úÖ ${papers.length} papers de ArXiv cargados`);
                
            } catch (error) {
                console.error('‚ùå Error al cargar papers:', error);
                const container = document.getElementById('papers-container');
                container.innerHTML = '<p style="color: #ff4757; text-align: center; padding: 40px; width: 100%;">Error al cargar los papers de ArXiv. Intenta nuevamente m√°s tarde.</p>';
            }
        }
        
        // Cargar papers al iniciar
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', cargarPapersArxiv);
        } else {
            cargarPapersArxiv();
        }
    </script>
    <br><br>
    
    <footer style="background: rgba(0,0,0,0.8); padding: 20px; color: #555; font-size: 0.8em; width: 100vw; margin: 0; text-align: center;">
        Desarrollado con Django, Open-Meteo y ArXiv | TuClima
    </footer>

<script>
    function usarGPS() {
        // 1. Preguntamos si el navegador tiene GPS
        if (navigator.geolocation) {
            // 2. Pedimos la posici√≥n
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    // √âXITO: Obtenemos coordenadas
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    // 3. Recargamos la p√°gina mandando los datos a tu Python
                    window.location.href = "/?lat=" + lat + "&lon=" + lon;
                },
                function(error) {
                    // ERROR: Si el usuario bloque√≥ el permiso
                    alert("‚ö†Ô∏è Error: No pudimos acceder a tu ubicaci√≥n. Verifica los permisos del navegador.");
                }
            );
        } else {
            alert("Tu navegador no soporta geolocalizaci√≥n.");
        }
    }
</script>

<style>
    .buscador {
        max-width: 100% !important;
        width: 100% !important;
    }
    
    .buscador form {
        max-width: 900px !important;
        width: 100% !important;
    }
</style>

<style>
    /* RESET GLOBAL */
    * {
        box-sizing: border-box;
    }
    
    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        overflow-x: hidden;
    }

    /* CSS DEL FOOTER CORREGIDO */
    .site-footer {
        background-color: #020617;
        border-top: 1px solid rgba(56, 189, 248, 0.3);
        padding: 60px 0 30px 0;
        margin-top: 80px;
        font-family: 'Segoe UI', sans-serif;
        color: #94a3b8;
        font-size: 0.9em;
        width: 100%;
        display: block;
        clear: both;
    }

    .footer-content {
        max-width: 1400px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 40px;
        margin-bottom: 50px;
        padding: 0 20px;
    }

    /* BARRA INFERIOR LEGAL */
    .footer-bottom {
        padding: 25px 20px 0 20px;
        border-top: 1px solid rgba(255,255,255,0.05);
        font-size: 0.8em;
        color: #64748b;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .footer-col h4 {
        color: #fff;
        font-family: 'Orbitron', sans-serif;
        margin-bottom: 25px;
        font-size: 1.0em;
        letter-spacing: 1px;
        border-bottom: 2px solid rgba(56, 189, 248, 0.3);
        display: inline-block;
        padding-bottom: 5px;
    }

    .footer-col p { 
        line-height: 1.6; 
        opacity: 0.8; 
        font-size: 0.95em; 
    }

    .footer-links { 
        list-style: none; 
        padding: 0; 
        margin: 0; 
    }

    .footer-links li { 
        margin-bottom: 12px; 
    }

    .footer-links a {
        text-decoration: none;
        color: #94a3b8;
        transition: 0.3s;
        display: flex; 
        align-items: center; 
        gap: 10px;
    }

    .footer-links a:hover { 
        color: #38bdf8; 
        transform: translateX(5px); 
    }

    .f-icon { 
        width: 18px; 
        height: 18px; 
        stroke: currentColor; 
        fill: none; 
        stroke-width: 2; 
        opacity: 0.9; 
    }

    .api-tag {
        background: rgba(56, 189, 248, 0.15);
        color: #38bdf8;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
    }

    .legal-links {
        display: flex;
        gap: 20px;
    }

    .legal-links a {
        color: #64748b;
        text-decoration: none;
        transition: 0.3s;
    }

    .legal-links a:hover {
        color: #38bdf8;
    }

    @media (max-width: 768px) {
        .footer-content {
            grid-template-columns: 1fr;
            gap: 30px;
            padding: 0 15px;
        }

        .footer-bottom { 
            flex-direction: column; 
            text-align: center;
            padding: 25px 15px 0 15px;
        }

        .legal-links { 
            flex-direction: column;
            gap: 10px;
        }
    }
</style>

    <footer class="site-footer" style="max-width: 1200px; margin: 0 auto;">
    <div class="footer-content">
        
        <div class="footer-col">
        <h4 style="color: #38bdf8; border-color: #38bdf8;">TuClima Pro</h4>
        <p>
           <strong>Suite de inteligencia clim√°tica con Motor de B√∫squeda Global.</strong><br>
    Potenciamos 4 sectores cr√≠ticos (Agro, Naval, A√©reo, Energ√≠as) integrando telemetr√≠a directa de <strong>NASA y OpenWeatherMap</strong>.
    <br><br>
    Toma de decisiones basada en datos atmosf√©ricos reales y precisos.
        </p>
        
        </div>

        <div class="footer-col">
        <h4>MODOS PRO</h4>
        <ul class="footer-links">
            <li>
            <a href="#"> <svg class="f-icon" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"/><path d="M8.5 8.5a4 4 0 0 1 5.66 0"/><path d="M10 10a2 2 0 0 1 2.83 0"/></svg>
                Modo Agro
            </a>
            </li>
            <li>
            <a href="#"> <svg class="f-icon" viewBox="0 0 24 24"><circle cx="12" cy="5" r="3"/><line x1="12" y1="22" x2="12" y2="8"/><path d="M5 12H2a10 10 0 0 0 20 0h-3"/></svg>
                Modo Naval
            </a>
            </li>
            <li>
            <a href="#"> <svg class="f-icon" viewBox="0 0 24 24"><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.3c.4-.2.6-.6.5-1.1z"/></svg>
                Modo A√©reo
            </a>
            </li>
            <li>
            <a href="#"> <svg class="f-icon" viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                Modo Energ√≠as
            </a>
            </li>
        </ul>
        </div>

        <div class="footer-col">
        <h4>CIENCIA</h4>
        <ul class="footer-links">
            <li>
            <a href="#"> 
                <svg class="f-icon" viewBox="0 0 24 24"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>
                Mapas & Radar
            </a>
            </li>
            <li>
            <a href="#"> 
                <svg class="f-icon" viewBox="0 0 24 24"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                Papers & ArXiv
            </a>
            </li>
            <li>
            <a href="#">
                <svg class="f-icon" viewBox="0 0 24 24"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
                Comparador Cient√≠fico
            </a>
            </li>
            <li>
            <a href="{% url 'espacio' %}">
                <svg class="f-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2"/><path d="M12 21v2"/><path d="M4.22 4.22l1.42 1.42"/><path d="M18.36 18.36l1.42 1.42"/><path d="M1 12h2"/><path d="M21 12h2"/></svg>
                Meteorolog√≠a Espacial
            </a>
            </li>
        </ul>
        </div>

        <div class="footer-col">
        <h4>PLATAFORMA</h4>
        <ul class="footer-links">
            <li>
            <a href="{% url 'home' %}">
                <svg class="f-icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                Inicio / Dashboard
            </a>
            </li>
            <li>
            <a href="#">
                <svg class="f-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                Centro de Ayuda
            </a>
            </li>
        </ul>
        
        <div style="margin-top: 25px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; font-size: 0.85em;">
            <span style="opacity:0.6;">Datos:</span>
            <span class="api-tag">OpenWeather</span>
            </div>
            <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.85em;">
            <span style="opacity:0.6;">Versi√≥n:</span>
            <span class="api-tag">v2.1 Stable</span>
            </div>
        </div>
        </div>

    </div>

    <div class="footer-bottom">
        <div>
        &copy; {% now "Y" %} <span class="notranslate">TuClima</span> Labs. Todos los derechos reservados.
        </div>
        <div class="legal-links">
    <a href="{% url 'legal' %}">Privacidad</a>
    <a href="{% url 'legal' %}">T√©rminos</a>
    <a href="{% url 'legal' %}">Cookies</a>
        </div>
    </div>
    </footer>
</div>
        </div>
    </footer>



<script type="text/javascript" src="https://cdn.weglot.com/weglot.min.js"></script>
    <script>
        Weglot.initialize({
            api_key: 'wg_169c193b22e7a117be85a2f56113ab415', // <--- TU CLAVE REAL
            hide_switcher: true,  // Ocultamos el bot√≥n feo original
            auto_switch: false    // Lo ponemos en manual para probar
        });
    </script> 
    
    <script>

    document.addEventListener('DOMContentLoaded', () => {
        const modals = document.querySelectorAll('.modal-overlay');

        modals.forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none'; // Cierra el modal
                }
            });

            const content = modal.querySelector('.modal-content');
            if (content) {
                content.addEventListener('click', (e) => {
                    e.stopPropagation(); // Previene el cierre del modal al hacer clic en el contenido
                });
            }
        });
    });
    </script>
</div>
</body>
</html>